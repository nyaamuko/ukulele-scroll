<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GAME - Ukulele Trainer (Prototype)</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <h1>🎸 ウクレレ GAME</h1>

    <section class="card">
      <h2>1) マイク</h2>
      <p class="small">
        マイクを許可すると、弾いた音を検出してチューニング判定します。<br/>
        うまく検出できない場合は「単音でゆっくり」「口に近い位置」「周囲を静かに」を試してください。
      </p>

      <div class="row">
        <button id="micBtn">🎤 マイク開始</button>
        <button id="micStopBtn" class="secondary" disabled>停止</button>
      </div>

      <div class="meterWrap">
        <div class="meterLabel">入力レベル</div>
        <div class="meter">
          <div id="levelBar" class="levelBar"></div>
        </div>
      </div>

      <div class="statusGrid">
        <div class="statusItem">
          <div class="label">検出Hz</div>
          <div id="hzText" class="value">--</div>
        </div>
        <div class="statusItem">
          <div class="label">判定</div>
          <div id="judgeText" class="value">--</div>
        </div>
        <div class="statusItem">
          <div class="label">cents</div>
          <div id="centsText" class="value">--</div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>2) チューニング（必須）</h2>
      <p class="small">4弦 G / 3弦 C / 2弦 A / 1弦 E が全部OKになるまで進めません。</p>

      <div id="strings" class="strings"></div>

      <div class="hint">
        <div class="hintTitle">コツ</div>
        <ul>
          <li>弦を1本だけ弾く（同時に鳴らさない）</li>
          <li>強く弾きすぎない（歪むと検出が乱れます）</li>
          <li>「今の弦」をタップして切り替えできます</li>
        </ul>
      </div>
    </section>

    <div id="stageBanner"></div>

    <section id="stage" class="card hidden">
      <h2 id="stageTitle">STAGE 1</h2>
      <p id="stageText">1弦 E を鳴らしてみよう</p>
      <div class="row">
        <button id="retryBtn" class="secondary">STAGE 1 やり直し</button>
      </div>
      <div id="stageResult" class="stageResult"></div>
    </section>

    <button id="startBtn" class="primary" disabled>START（チューニング完了で解除）</button>

    <div class="footer small">
      Prototype v1（マイク判定入り）
    </div>
  </div>

  <script src="notes.js"></script>
  <script src="app.js"></script>
</body>
</html>